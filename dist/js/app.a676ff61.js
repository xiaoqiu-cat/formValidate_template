(function(){"use strict";var e={1812:function(e,r,t){var n=t(6369),o=function(){var e=this,r=e._self._c;return r("div",{attrs:{id:"app"}},[r("FormValid")],1)},a=[],l=function(){var e=this,r=e._self._c;return r("div",{staticClass:"full-page"},[r("el-form",{ref:"elForm",staticClass:"add-from-container",attrs:{model:e.addtableData,rules:e.elFormRules,size:"small",inline:!0}},[r("el-table",{attrs:{data:e.addtableData.ajustData,"row-key":"id","show-header":!0,"expand-row-keys":e.expandRowKeys,"row-class-name":e.rowClassName,"cell-class-name":({row:e})=>e.childrens&&e.childrens.length?"has-children":"",height:"450"},on:{"selection-change":e.handleAddSelection}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-table",{attrs:{"show-header":!1,data:t.row.childrens,border:!1}},e._l(e.tabHeader,(function(n,o){return r("el-table-column",{key:o,attrs:{prop:n.prop,label:n.label},scopedSlots:e._u([{key:"default",fn:function(o){return[1===o.row.type?["type"===n.prop?[r("el-tag",{attrs:{type:"success"}},[e._v("新")])]:"name"===n.prop?[r("el-form-item",{attrs:{prop:n.prop,error:o.row.nameError}},[r("el-input",{attrs:{clearable:""},on:{input:function(r){return e.onExchange({currentIndex:o.$index,currentRow:o.row,fieldName:"name",parentIndex:t.$index,parentRow:t.row})}},model:{value:o.row.name,callback:function(r){e.$set(o.row,"name",r)},expression:"scope.row.name"}}),r("div",{staticStyle:{display:"none"}},[e._v(e._s(t.row.childrens[0].errorMsg))])],1)]:"level"===n.prop?[r("el-form-item",{attrs:{prop:n.prop,error:o.row.levelError}},[r("el-select",{attrs:{clearable:""},on:{change:function(r){return e.onExchange({currentIndex:o.$index,currentRow:o.row,fieldName:"level",parentIndex:t.$index,parentRow:t.row})}},model:{value:o.row.level,callback:function(r){e.$set(o.row,"level",r)},expression:"scope.row.level"}},[r("el-option",{attrs:{value:"实施性施工组织总设计"}})],1)],1)]:"target"===n.prop?[r("el-form-item",{attrs:{prop:n.prop,error:o.row.targetError}},[r("el-select",{attrs:{clearable:""},on:{change:function(r){return e.onExchange({currentIndex:o.$index,currentRow:o.row,fieldName:"target",parentIndex:t.$index,parentRow:t.row})}},model:{value:o.row.target,callback:function(r){e.$set(o.row,"target",r)},expression:"scope.row.target"}},[r("el-option",{attrs:{value:"经过专家论证"}})],1)],1)]:"plan_time"===n.prop?[r("el-form-item",{attrs:{prop:n.prop,error:o.row.plan_timeError}},[r("el-date-picker",{staticStyle:{width:"150px"},attrs:{clearable:"",size:"small"},on:{change:function(r){return e.onExchange({currentIndex:o.$index,currentRow:o.row,fieldName:"plan_time",parentIndex:t.$index,parentRow:t.row})}},model:{value:o.row.plan_time,callback:function(r){e.$set(o.row,"plan_time",r)},expression:"scope.row.plan_time"}})],1)]:"person"===n.prop?[r("el-form-item",{attrs:{prop:n.prop,error:o.row.personError}},[r("el-input",{attrs:{clearable:""},on:{input:function(r){return e.onExchange({currentIndex:o.$index,currentRow:o.row,fieldName:"person",parentIndex:t.$index,parentRow:t.row})}},model:{value:o.row.person,callback:function(r){e.$set(o.row,"person",r)},expression:"scope.row.person"}})],1)]:"opration"===n.prop?[r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.handleRowValid({currentIndex:o.$index,currentRow:o.row,parentIndex:t.$index,parentRow:t.row})}}},[e._v("单行验证")])]:[e._v(" "+e._s(o.row[n.prop])+" ")]]:["type"===n.prop?r("span",[r("el-tag",{attrs:{type:"info"}},[e._v("旧")])],1):r("span",[e._v(e._s(o.row[n.prop]))])]]}}],null,!0)})})),1)]}}])}),e._l(e.tabHeader,(function(t,n){return r("el-table-column",{key:n,attrs:{prop:t.prop,label:t.label,align:t.align,width:t.width,"show-overflow-tooltip":t.toolitp},scopedSlots:e._u([{key:"default",fn:function(n){return[1===n.row.type?["type"===t.prop?[r("el-tag",{attrs:{type:"success"}},[e._v("新")])]:"name"===t.prop?[r("el-form-item",{attrs:{prop:t.prop,error:n.row.nameError}},[r("el-input",{attrs:{clearable:""},on:{change:function(r){return e.onExchange({currentIndex:n.$index,currentRow:n.row,fieldName:"name",parentIndex:null,parentRow:null})}},model:{value:n.row.name,callback:function(r){e.$set(n.row,"name",r)},expression:"scope.row.name"}})],1)]:"level"===t.prop?[r("el-form-item",{attrs:{prop:t.prop,error:n.row.levelError}},[r("el-select",{attrs:{clearable:""},on:{change:function(r){return e.onExchange({currentIndex:n.$index,currentRow:n.row,fieldName:"level",parentIndex:null,parentRow:null})}},model:{value:n.row.level,callback:function(r){e.$set(n.row,"level",r)},expression:"scope.row.level"}},[r("el-option",{attrs:{value:"实施性施工组织总设计"}})],1)],1)]:"target"===t.prop?[r("el-form-item",{attrs:{prop:t.prop,error:n.row.targetError}},[r("el-select",{attrs:{clearable:""},on:{change:function(r){return e.onExchange({currentIndex:n.$index,currentRow:n.row,fieldName:"target",parentIndex:null,parentRow:null})}},model:{value:n.row.target,callback:function(r){e.$set(n.row,"target",r)},expression:"scope.row.target"}},[r("el-option",{attrs:{value:"经过专家论证"}})],1)],1)]:"plan_time"===t.prop?[r("el-form-item",{attrs:{prop:t.prop,error:n.row.plan_timeError}},[r("el-date-picker",{staticStyle:{width:"150px"},attrs:{clearable:"",size:"small"},on:{change:function(r){return e.onExchange({currentIndex:n.$index,currentRow:n.row,fieldName:"plan_time",parentIndex:null,parentRow:null})}},model:{value:n.row.plan_time,callback:function(r){e.$set(n.row,"plan_time",r)},expression:"scope.row.plan_time"}})],1)]:"person"===t.prop?[r("el-form-item",{attrs:{prop:t.prop,error:n.row.personError}},[r("el-input",{attrs:{clearable:""},on:{change:function(r){return e.onExchange({currentIndex:n.$index,currentRow:n.row,fieldName:"person",parentIndex:null,parentRow:null})}},model:{value:n.row.person,callback:function(r){e.$set(n.row,"person",r)},expression:"scope.row.person"}})],1)]:"opration"===t.prop?[r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.handleRowValid({currentIndex:n.$index,currentRow:n.row,parentIndex:null,parentRow:null})}}},[e._v("单行验证")])]:[e._v(" "+e._s(n.row[t.prop])+" ")]]:["type"===t.prop?r("span",[r("el-tag",{attrs:{type:"info"}},[e._v("旧")])],1):r("span",[e._v(e._s(n.row[t.prop]))])]]}}],null,!0)})}))],2)],1),r("el-button",{attrs:{type:"primary"},on:{click:e.handleValid}},[e._v("整个表单验证")])],1)},p=[],i=(t(7658),{name:"FormValid",data(){return{addtableData:{ajustData:[{id:1,type:1,name:"",level:"",target:"",plan_time:"",status:"完成",person:"",childrens:[]},{id:2,type:0,name:"改方案状态",level:"B类方案",target:"使用起重机安装的工程",plan_time:"2022-12-16 00:00:00",status:"已完成",person:"姚康乐",childrens:[{type:1,name:"",level:"",target:"",plan_time:"",status:"完成",person:""},{type:1,name:"",level:"",target:"",plan_time:"",status:"完成",person:""}]}]},tabHeader:[{label:"类型",prop:"type",align:"center",toolitp:!0},{label:"专项方案名称",prop:"name",align:"center",toolitp:!0},{label:"方案等级",prop:"level",align:"center",toolitp:!0},{label:"量化指标",prop:"target",align:"center",toolitp:!0},{label:"计划上报时间",prop:"plan_time",width:200,align:"center",toolitp:!0},{label:"完成状态",prop:"status",align:"center",toolitp:!0},{label:"编制人",prop:"person",align:"center",toolitp:!0},{label:"操作",prop:"opration",align:"center",toolitp:!0}],expandRowKeys:[],elFormRules:{},childForm:{},childFormRules:{},formModel:{name:"",person:""},rowFormRules:{name:[{required:!0,message:"单行验证-方案名称不能为空"}],person:[{required:!0,message:"单行验证-编制人不能为空"}]}}},methods:{handleAddSelection(){},rowClassName(e){return 0==e.row.childrens.length?"row-expand-cover":"test"},onExchange(e){let{currentIndex:r,fieldName:t,currentRow:n,parentIndex:o,parentRow:a}=e;if(a&&a.childrens.length)console.log("children"),this.$set(this.addtableData.ajustData[o].childrens,r,n);else{console.log("parent");let e=this.addtableData.ajustData[r];this.$set(this.addtableData.ajustData,r,e)}let l=t,p=n;"name"==l?""==p.name?p.nameError="方案名称不能为空":p.nameError="":"level"==l?""==p.level?p.levelError="请选择方案等级":p.levelError="":"target"==l?""==p.target?p.targetError="请选择量化指标":p.targetError="":"plan_time"==l?""==p.plan_time?p.plan_timeError="请选择计划上报时间":p.plan_timeError="":"person"==l&&(""==p.person?p.personError="编制人不能为空":p.personError="")},handleRowValid(e){let{currentIndex:r,currentRow:t,parentIndex:n,parentRow:o}=e,a=!0,l=t;if(l.name||(l.nameError="方案名称不能为空",a=!1),l.level||(l.levelError="请选择方案等级",a=!1),l.target||(l.targetError="请选择量化指标",a=!1),l.plan_time||(l.plan_timeError="请选择计划上报时间",a=!1),l.person||(l.personError="编制人不能为空",a=!1),o&&o.childrens.length)console.log("parent"),this.$set(this.addtableData.ajustData[n].childrens,r,l);else{console.log("parent");let e=this.addtableData.ajustData[r];this.$set(this.addtableData.ajustData,r,e)}a&&this.$message.success("验证通过,可以操作数据了")},handleValid(){let e=this.addtableData.ajustData,r=!0;e.forEach(((t,n)=>{if(r=this.updateErrorMsg(t,r),!r&&t.childrens&&t.childrens.length){if(this.expandRowKeys.includes("id"))return;this.expandRowKeys.push(t.id)}this.$set(e,n,t),t.childrens&&t.childrens.length&&t.childrens.forEach(((t,o)=>{r=this.updateErrorMsg(t),this.$set(e[n].childrens,o,t)}))})),r&&this.$message.success("验证通过,可以提交表单数据了")},updateErrorMsg(e,r){return e.name?delete e.nameError:(e.nameError="方案名称不能为空",r=!1),e.level?delete e.levelError:(e.levelError="请选择方案等级",r=!1),e.target?delete e.targetError:(e.targetError="请选择量化指标",r=!1),e.plan_time?delete e.plan_timeError:(e.plan_timeError="请选择计划上报时间",r=!1),e.person?delete e.personError:(e.personError="编制人不能为空",r=!1),r}}}),s=i,c=t(1001),u=(0,c.Z)(s,l,p,!1,null,"245aafc4",null),d=u.exports,m={name:"App",components:{FormValid:d}},f=m,w=(0,c.Z)(f,o,a,!1,null,null,null),h=w.exports,g=t(8499),v=t.n(g);n["default"].config.productionTip=!1,n["default"].use(v()),new n["default"]({render:e=>e(h)}).$mount("#app")}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var a=r[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}t.m=e,function(){var e=[];t.O=function(r,n,o,a){if(!n){var l=1/0;for(c=0;c<e.length;c++){n=e[c][0],o=e[c][1],a=e[c][2];for(var p=!0,i=0;i<n.length;i++)(!1&a||l>=a)&&Object.keys(t.O).every((function(e){return t.O[e](n[i])}))?n.splice(i--,1):(p=!1,a<l&&(l=a));if(p){e.splice(c--,1);var s=o();void 0!==s&&(r=s)}}return r}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,o,a]}}(),function(){t.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(r,{a:r}),r}}(),function(){t.d=function(e,r){for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};t.O.j=function(r){return 0===e[r]};var r=function(r,n){var o,a,l=n[0],p=n[1],i=n[2],s=0;if(l.some((function(r){return 0!==e[r]}))){for(o in p)t.o(p,o)&&(t.m[o]=p[o]);if(i)var c=i(t)}for(r&&r(n);s<l.length;s++)a=l[s],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(c)},n=self["webpackChunkvue2_form_template"]=self["webpackChunkvue2_form_template"]||[];n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n))}();var n=t.O(void 0,[998],(function(){return t(1812)}));n=t.O(n)})();
//# sourceMappingURL=app.a676ff61.js.map